<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Usuario 2</title>
</head>
<body>
    <h1>Bienvenido, Usuario 2</h1>
    <h2>Ingreso Camión</h2>
    <button id="addIngresoBtn">Añadir ingreso</button>
    <div id="ingresoList"></div>
    <dialog id="ingresoDialog">
        <form method="dialog" id="ingresoForm">
            <label for="hora">Hora de ingreso:</label>
            <input type="time" id="hora" name="hora" required><br><br>
            <label for="fecha">Día de ingreso:</label>
            <input type="date" id="fecha" name="fecha" required><br><br>
            <button type="submit">Guardar</button>
            <button type="button" id="cancelBtn">Cancelar</button>
        </form>
    </dialog>
    <script>
        const addIngresoBtn = document.getElementById('addIngresoBtn');
        const ingresoDialog = document.getElementById('ingresoDialog');
        const ingresoForm = document.getElementById('ingresoForm');
        const cancelBtn = document.getElementById('cancelBtn');
        const ingresoList = document.getElementById('ingresoList');
        let ingresos = JSON.parse(localStorage.getItem('ingresos') || '[]');
        renderIngresos();

        addIngresoBtn.onclick = () => ingresoDialog.showModal();
        cancelBtn.onclick = () => ingresoDialog.close();

        ingresoForm.onsubmit = function(e) {
            e.preventDefault();
            const hora = document.getElementById('hora').value;
            const fecha = document.getElementById('fecha').value;
            ingresos.push({ hora, fecha });
            localStorage.setItem('ingresos', JSON.stringify(ingresos));
            renderIngresos();
            ingresoDialog.close();
            ingresoForm.reset();
        };

        function renderIngresos() {
            ingresoList.innerHTML = '';
            ingresos.forEach((ingreso, idx) => {
                const div = document.createElement('div');
                div.textContent = `Ingreso: ${ingreso.hora} - Día: ${ingreso.fecha}`;
                ingresoList.appendChild(div);
            });
        }
    </script>
</body>
</html>
